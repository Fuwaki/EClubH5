@import "tailwindcss";

/* 全局平滑滚动与触控优化 */
html, body {
  -webkit-tap-highlight-color: rgba(0,0,0,0);
  scroll-behavior: smooth;
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* Reveal 基础（进入视图轻量动画）*/
.reveal-init { opacity:0; transform: translateY(22px) scale(.985); filter: blur(4px); }
.reveal-in { opacity:1; transform:none; filter:none; }

/* 过渡统一控制（单次播放）*/
.reveal-anim { transition:
  opacity .75s cubic-bezier(.22,.75,.25,1),
  transform .75s cubic-bezier(.22,.75,.25,1),
  filter .9s cubic-bezier(.22,.75,.25,1);
  will-change: opacity, transform, filter;
}

/* 变体 */
.reveal-up.reveal-init { transform: translateY(28px) scale(.985); }
.reveal-fade.reveal-init { transform:none; }
.reveal-scale.reveal-init { transform: scale(.94); }
.reveal-left.reveal-init { transform: translateX(-28px); }
.reveal-right.reveal-init { transform: translateX(28px); }

/* Pop 变体：进入时轻微过冲缩放 */
.reveal-pop.reveal-init { opacity:0; transform: scale(.88); filter: blur(6px); }
.reveal-pop.reveal-in { animation: popOvershoot .9s cubic-bezier(.22,.75,.25,1) forwards; filter:none; }
@keyframes popOvershoot { 0% { transform: scale(.88); opacity:0 } 60% { transform: scale(1.028); opacity:1 } 100% { transform: scale(1); opacity:1 } }

/* 组合：pop + up 允许初始同时有位移 */
.reveal-pop.reveal-up.reveal-init { transform: translateY(32px) scale(.88); }

/* 减少动画偏好：直接可见 */
@media (prefers-reduced-motion: reduce) {
  .reveal-init { opacity:1 !important; transform:none !important; filter:none !important; }
  .reveal-anim { transition:none !important; }
  .reveal-pop.reveal-init { transform:none !important; filter:none !important; }
  .reveal-pop.reveal-in { animation:none !important; }
}

/* 安全区辅助 */
.safe-bottom { padding-bottom: calc(env(safe-area-inset-bottom)); }
.safe-bottom-4 { padding-bottom: calc(env(safe-area-inset-bottom) + 1rem); }
.safe-top { padding-top: calc(env(safe-area-inset-top)); }

/* ============== 增强：滚动进度条 ============== */
.scroll-progress {
  position: fixed;
  inset: 0 auto auto 0;
  width: 100%;
  height: 3px;
  z-index: 60;
  pointer-events: none;
  background: transparent;
}
.scroll-progress__bar {
  width: 100%;
  height: 100%;
  transform-origin: 0 50%;
  transform: scaleX(0);
  background: linear-gradient(90deg, rgba(16,185,129,.9), rgba(34,211,238,.9));
  box-shadow: 0 0 12px rgba(16,185,129,.45), 0 0 18px rgba(34,211,238,.35);
}

/* ============== 增强：倾斜交互的高光与阴影 ============== */
.tilt-active {
  filter: drop-shadow(0 8px 20px rgba(16,185,129,.18));
  transform-style: preserve-3d;
}
.tilt-active::after {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  pointer-events: none;
  background: radial-gradient(80% 60% at 30% 20%, rgba(16,185,129,.12), transparent 60%),
              radial-gradient(80% 60% at 70% 80%, rgba(34,211,238,.12), transparent 60%);
  opacity: .9;
}

/* ============== 性能：内容可见性优化（Chrome/新 Safari 有效） ============== */
.cv-auto {
  content-visibility: auto;
  contain-intrinsic-size: 1px 900px; /* 预估高度，避免跳动 */
}

/* 通用隐藏滚动条（移动端横滑区域用） */
.no-scrollbar {
  scrollbar-width: none; /* Firefox */
}
.no-scrollbar::-webkit-scrollbar { display: none; }
